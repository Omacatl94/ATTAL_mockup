<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ATTAL Group - 500+ Offerte di Lavoro in Italia | Agenzia per il Lavoro</title>
    <meta name="description" content="Trova lavoro vicino casa con ATTAL. 80 filiali in Italia, 13.000+ persone al lavoro ogni giorno.">

    <!-- CSS Esterni -->
    <link rel="stylesheet" href="../assets/css/variables.css">
    <link rel="stylesheet" href="../assets/css/base.css">
    <link rel="stylesheet" href="../assets/css/components.css">
    <link rel="stylesheet" href="../assets/css/pages/homepage.css">

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>
    <!-- Header incluso dinamicamente -->
    <div id="header-placeholder"></div>

    <!-- HERO SECTION -->
    <section class="hero" style="background: #ffffff;">
        <div class="container">
            <h1 style="color: #1f2937;"><span id="counter">0</span> Offerte di Lavoro<br>Vicino a Te</h1>
            <p class="subtitle" style="color: #4b5563;">80 filiali in Italia, una nella tua città</p>

            <!-- SEARCH BAR -->
            <form class="search-container" onsubmit="handleSearch(event)">
                <input type="text" class="search-input" placeholder="Che lavoro cerchi?" id="jobQuery">
                <select class="search-select" id="citySelect">
                    <option value="">Tutta Italia</option>
                    <option value="milano">Milano</option>
                    <option value="roma">Roma</option>
                    <option value="torino">Torino</option>
                    <option value="napoli">Napoli</option>
                    <option value="bologna">Bologna</option>
                    <option value="firenze">Firenze</option>
                    <option value="genova">Genova</option>
                    <option value="palermo">Palermo</option>
                    <option value="bari">Bari</option>
                    <option value="catania">Catania</option>
                </select>
                <button type="submit" class="search-btn">CERCA LAVORO →</button>
            </form>

            <!-- QUICK LINKS -->
            <div class="quick-links">
                <a href="#">Lavoro Milano</a>
                <a href="#">Lavoro Roma</a>
                <a href="#">Operaio</a>
                <a href="#">Magazziniere</a>
                <a href="#">Commesso</a>
                <a href="#">Lavoro Part Time</a>
            </div>
        </div>
    </section>

    <!-- STATS SECTION -->
    <section class="stats">
        <div class="container">
            <div class="stats-grid">
                <div class="stat-item" id="stat1">
                    <div class="stat-number">
                        <div class="stars-container" id="stars-container">
                            <!-- Stars will be added by JavaScript -->
                        </div>
                        <span id="rating">4.2</span>/5
                    </div>
                    <div class="stat-label">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%234285F4' d='M44.5 20H24v8.5h11.8C34.7 33.9 30.1 37 24 37c-7.2 0-13-5.8-13-13s5.8-13 13-13c3.1 0 5.9 1.1 8.1 2.9l6.4-6.4C34.6 4.1 29.6 2 24 2 11.8 2 2 11.8 2 24s9.8 22 22 22c11 0 21-8 21-22 0-1.3-.2-2.7-.5-4z'/%3E%3C/svg%3E" alt="G" style="width: 16px; height: 16px; vertical-align: middle; margin-right: 4px;">
                        Google Reviews
                    </div>
                </div>
                <div class="stat-item" id="stat2">
                    <div class="stat-number">13.000+</div>
                    <div class="stat-label">Persone al lavoro<br>ogni giorno</div>
                </div>
                <div class="stat-item" id="stat3">
                    <div class="stat-number">80</div>
                    <div class="stat-label">Filiali<br>in Italia</div>
                </div>
                <div class="stat-item" id="stat4">
                    <div class="stat-number">25+</div>
                    <div class="stat-label">Anni di<br>esperienza</div>
                </div>
            </div>

            <!-- REVIEWS with Google Badge -->
            <div class="container" style="margin-top: 60px;">
                <h3 style="text-align: center; font-size: 24px; margin-bottom: 30px; color: #1f2937;">Cosa dicono di noi</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div class="review-card" style="animation-delay: 0.1s;">
                        <div class="review-header">
                            <div class="review-stars">★★★★★</div>
                            <div class="google-badge">
                                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%234285F4' d='M44.5 20H24v8.5h11.8C34.7 33.9 30.1 37 24 37c-7.2 0-13-5.8-13-13s5.8-13 13-13c3.1 0 5.9 1.1 8.1 2.9l6.4-6.4C34.6 4.1 29.6 2 24 2 11.8 2 2 11.8 2 24s9.8 22 22 22c11 0 21-8 21-22 0-1.3-.2-2.7-.5-4z'/%3E%3C/svg%3E" alt="G" style="width: 14px; height: 14px;">
                                Verificata
                            </div>
                        </div>
                        <p class="review-text">"Ho trovato lavoro in 5 giorni vicino casa. Personale super disponibile!"</p>
                        <p class="review-author">
                            <span style="width: 32px; height: 32px; background: #e5e7eb; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #6b7280;">M</span>
                            Marco R. • Milano • 2 giorni fa
                        </p>
                    </div>
                    <div class="review-card" style="animation-delay: 0.2s;">
                        <div class="review-header">
                            <div class="review-stars">★★★★★</div>
                            <div class="google-badge">
                                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%234285F4' d='M44.5 20H24v8.5h11.8C34.7 33.9 30.1 37 24 37c-7.2 0-13-5.8-13-13s5.8-13 13-13c3.1 0 5.9 1.1 8.1 2.9l6.4-6.4C34.6 4.1 29.6 2 24 2 11.8 2 2 11.8 2 24s9.8 22 22 22c11 0 21-8 21-22 0-1.3-.2-2.7-.5-4z'/%3E%3C/svg%3E" alt="G" style="width: 14px; height: 14px;">
                                Verificata
                            </div>
                        </div>
                        <p class="review-text">"Mi hanno seguito dal primo giorno. Contratto serio e puntualità nei pagamenti."</p>
                        <p class="review-author">
                            <span style="width: 32px; height: 32px; background: #fee2e2; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #e22721;">S</span>
                            Sara L. • Torino • 1 settimana fa
                        </p>
                    </div>
                    <div class="review-card" style="animation-delay: 0.3s;">
                        <div class="review-header">
                            <div class="review-stars">★★★★☆</div>
                            <div class="google-badge">
                                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%234285F4' d='M44.5 20H24v8.5h11.8C34.7 33.9 30.1 37 24 37c-7.2 0-13-5.8-13-13s5.8-13 13-13c3.1 0 5.9 1.1 8.1 2.9l6.4-6.4C34.6 4.1 29.6 2 24 2 11.8 2 2 11.8 2 24s9.8 22 22 22c11 0 21-8 21-22 0-1.3-.2-2.7-.5-4z'/%3E%3C/svg%3E" alt="G" style="width: 14px; height: 14px;">
                                Verificata
                            </div>
                        </div>
                        <p class="review-text">"Finalmente un'agenzia seria. Dopo anni di promesse vuote, ATTAL mantiene la parola."</p>
                        <p class="review-author">
                            <span style="width: 32px; height: 32px; background: #e5e7eb; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #6b7280;">L</span>
                            Luca P. • Bologna • 3 settimane fa
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- HOW IT WORKS -->
    <section class="how-it-works">
        <div class="container">
            <h2 class="section-title">Come ti aiutiamo a trovare lavoro</h2>

            <!-- Animated Timeline -->
            <div style="position: relative; max-width: 800px; margin: 0 auto 60px;">
                <!-- Steps Container -->
                <div style="display: flex; justify-content: space-between; position: relative; z-index: 3;">
                    <!-- Step 1 -->
                    <div class="timeline-step" id="step1" style="flex: 1; text-align: center; opacity: 0; transform: translateY(20px); transition: all 0.6s ease;">
                        <div style="width: 80px; height: 80px; margin: 0 auto 20px; background: linear-gradient(135deg, #e22721, #c91f1a); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 20px rgba(226,39,33,0.3);">
                            <i data-lucide="search" style="width: 36px; height: 36px; stroke: white;"></i>
                        </div>
                        <h3 style="font-size: 20px; font-weight: bold; color: #1f2937; margin-bottom: 10px;">CERCA</h3>
                        <p style="color: #6b7280; font-size: 14px;">Esplora centinaia di offerte<br>vicino a te</p>
                    </div>

                    <!-- Step 2 -->
                    <div class="timeline-step" id="step2" style="flex: 1; text-align: center; opacity: 0; transform: translateY(20px); transition: all 0.6s ease;">
                        <div style="width: 80px; height: 80px; margin: 0 auto 20px; background: linear-gradient(135deg, #E56E12, #cc6210); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 20px rgba(229,110,18,0.3);">
                            <i data-lucide="file-text" style="width: 36px; height: 36px; stroke: white;"></i>
                        </div>
                        <h3 style="font-size: 20px; font-weight: bold; color: #1f2937; margin-bottom: 10px;">CANDIDATI</h3>
                        <p style="color: #6b7280; font-size: 14px;">Invia il CV in 2 minuti<br>Sistema semplificato</p>
                    </div>

                    <!-- Step 3 -->
                    <div class="timeline-step" id="step3" style="flex: 1; text-align: center; opacity: 0; transform: translateY(20px); transition: all 0.6s ease;">
                        <div style="width: 80px; height: 80px; margin: 0 auto 20px; background: linear-gradient(135deg, #0B8D84, #097a72); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 20px rgba(11,141,132,0.3); position: relative; overflow: hidden;">
                            <i data-lucide="check-circle" style="width: 36px; height: 36px; stroke: white; z-index: 2; position: relative;"></i>
                            <div style="position: absolute; width: 100%; height: 100%; background: radial-gradient(circle, rgba(255,255,255,0.4) 0%, transparent 70%); animation: pulse 2s infinite;"></div>
                        </div>
                        <h3 style="font-size: 20px; font-weight: bold; color: #1f2937; margin-bottom: 10px;">LAVORA!</h3>
                        <p style="color: #6b7280; font-size: 14px;"><strong>Ti chiamiamo in 48 ore</strong><br>Garanzia ATTAL</p>
                    </div>
                </div>
            </div>

            <!-- Stats Below Timeline -->
            <div style="display: flex; justify-content: center; gap: 30px; margin-bottom: 60px; flex-wrap: wrap;">
                <div style="text-align: center; padding: 20px 30px; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
                    <div style="font-size: 32px; font-weight: bold; color: #e22721; margin-bottom: 8px;">2 min</div>
                    <div style="color: #6b7280; font-size: 14px;">Tempo medio candidatura</div>
                </div>
                <div style="text-align: center; padding: 20px 30px; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
                    <div style="font-size: 32px; font-weight: bold; color: #e22721; margin-bottom: 8px;">48h</div>
                    <div style="color: #6b7280; font-size: 14px;">Risposta garantita</div>
                </div>
                <div style="text-align: center; padding: 20px 30px; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
                    <div style="font-size: 32px; font-weight: bold; color: #e22721; margin-bottom: 8px;">92%</div>
                    <div style="color: #6b7280; font-size: 14px;">Tasso di successo</div>
                </div>
            </div>

            <div style="text-align: center;">
                <a href="careers.html" class="search-btn" style="display: inline-block; text-decoration: none; font-size: 18px; padding: 18px 50px; background: #e22721; transition: all 0.3s ease;"
                   onmouseover="this.style.background='#c91f1a'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(226,39,33,0.4)'"
                   onmouseout="this.style.background='#e22721'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                    INIZIA SUBITO →
                </a>
            </div>
        </div>
    </section>

    <!-- MAP SECTION -->
    <section class="map-section" id="filiali">
        <div class="container">
            <h2 class="section-title">80 Filiali in Tutta Italia</h2>
            <p style="text-align: center; font-size: 20px; color: #6b7280; margin-bottom: 40px;">
                Una sempre vicino a te
            </p>

            <!-- LEAFLET MAP -->
            <div id="italy-map" style="border-radius: 12px; overflow: hidden; margin-bottom: 40px; height: 500px; box-shadow: 0 4px 20px rgba(0,0,0,0.08);"></div>

            <!-- City Cards Grid -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 40px;">
                <!-- Milano -->
                <div style="background: white; border: 2px solid #e5e7eb; border-radius: 8px; padding: 20px; cursor: pointer; transition: all 0.3s;"
                     onmouseover="this.style.borderColor='#e22721'; this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 25px rgba(0,0,0,0.1)'"
                     onmouseout="this.style.borderColor='#e5e7eb'; this.style.transform='translateY(0)'; this.style.boxShadow='none'"
                     onclick="showCityPopup('Milano', 12)">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <h3 style="color: #e22721; font-size: 20px; margin: 0;">Milano</h3>
                        <span style="background: #e22721; color: white; padding: 4px 12px; border-radius: 20px; font-weight: bold;">12</span>
                    </div>
                    <p style="color: #6b7280; font-size: 14px; margin-bottom: 8px;"><i data-lucide="map-pin" style="width: 14px; height: 14px; display: inline; vertical-align: middle; stroke: #e22721;"></i> Via Pergolesi 8 - Sede Centrale</p>
                    <p style="color: #9ca3af; font-size: 12px;">+ altre 11 filiali</p>
                </div>

                <!-- Roma -->
                <div style="background: white; border: 2px solid #e5e7eb; border-radius: 8px; padding: 20px; cursor: pointer; transition: all 0.3s;"
                     onmouseover="this.style.borderColor='#e22721'; this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 25px rgba(0,0,0,0.1)'"
                     onmouseout="this.style.borderColor='#e5e7eb'; this.style.transform='translateY(0)'; this.style.boxShadow='none'"
                     onclick="showCityPopup('Roma', 8)">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <h3 style="color: #e22721; font-size: 20px; margin: 0;">Roma</h3>
                        <span style="background: #e22721; color: white; padding: 4px 12px; border-radius: 20px; font-weight: bold;">8</span>
                    </div>
                    <p style="color: #6b7280; font-size: 14px; margin-bottom: 8px;"><i data-lucide="map-pin" style="width: 14px; height: 14px; display: inline; vertical-align: middle; stroke: #e22721;"></i> Via Nazionale 20</p>
                    <p style="color: #9ca3af; font-size: 12px;">+ altre 7 filiali</p>
                </div>

                <!-- Torino -->
                <div style="background: white; border: 2px solid #e5e7eb; border-radius: 8px; padding: 20px; cursor: pointer; transition: all 0.3s;"
                     onmouseover="this.style.borderColor='#e22721'; this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 25px rgba(0,0,0,0.1)'"
                     onmouseout="this.style.borderColor='#e5e7eb'; this.style.transform='translateY(0)'; this.style.boxShadow='none'"
                     onclick="showCityPopup('Torino', 6)">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <h3 style="color: #e22721; font-size: 20px; margin: 0;">Torino</h3>
                        <span style="background: #e22721; color: white; padding: 4px 12px; border-radius: 20px; font-weight: bold;">6</span>
                    </div>
                    <p style="color: #6b7280; font-size: 14px; margin-bottom: 8px;"><i data-lucide="map-pin" style="width: 14px; height: 14px; display: inline; vertical-align: middle; stroke: #e22721;"></i> Corso Francia 10</p>
                    <p style="color: #9ca3af; font-size: 12px;">+ altre 5 filiali</p>
                </div>

                <!-- Bologna -->
                <div style="background: white; border: 2px solid #e5e7eb; border-radius: 8px; padding: 20px; cursor: pointer; transition: all 0.3s;"
                     onmouseover="this.style.borderColor='#e22721'; this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 25px rgba(0,0,0,0.1)'"
                     onmouseout="this.style.borderColor='#e5e7eb'; this.style.transform='translateY(0)'; this.style.boxShadow='none'"
                     onclick="showCityPopup('Bologna', 5)">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <h3 style="color: #e22721; font-size: 20px; margin: 0;">Bologna</h3>
                        <span style="background: #e22721; color: white; padding: 4px 12px; border-radius: 20px; font-weight: bold;">5</span>
                    </div>
                    <p style="color: #6b7280; font-size: 14px; margin-bottom: 8px;"><i data-lucide="map-pin" style="width: 14px; height: 14px; display: inline; vertical-align: middle; stroke: #e22721;"></i> Via Indipendenza 30</p>
                    <p style="color: #9ca3af; font-size: 12px;">+ altre 4 filiali</p>
                </div>

                <!-- Napoli -->
                <div style="background: white; border: 2px solid #e5e7eb; border-radius: 8px; padding: 20px; cursor: pointer; transition: all 0.3s;"
                     onmouseover="this.style.borderColor='#e22721'; this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 25px rgba(0,0,0,0.1)'"
                     onmouseout="this.style.borderColor='#e5e7eb'; this.style.transform='translateY(0)'; this.style.boxShadow='none'"
                     onclick="showCityPopup('Napoli', 4)">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <h3 style="color: #e22721; font-size: 20px; margin: 0;">Napoli</h3>
                        <span style="background: #e22721; color: white; padding: 4px 12px; border-radius: 20px; font-weight: bold;">4</span>
                    </div>
                    <p style="color: #6b7280; font-size: 14px; margin-bottom: 8px;"><i data-lucide="map-pin" style="width: 14px; height: 14px; display: inline; vertical-align: middle; stroke: #e22721;"></i> Via Toledo 100</p>
                    <p style="color: #9ca3af; font-size: 12px;">+ altre 3 filiali</p>
                </div>

                <!-- Altre città -->
                <div style="background: #fee2e2; border: 2px solid #e22721; border-radius: 8px; padding: 20px; cursor: pointer; transition: all 0.3s;"
                     onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 25px rgba(0,0,0,0.1)'"
                     onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'"
                     onclick="alert('Mostra tutte le 80 filiali...')">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <h3 style="color: #e22721; font-size: 20px; margin: 0;">Altre città</h3>
                        <span style="background: #e22721; color: white; padding: 4px 12px; border-radius: 20px; font-weight: bold;">45+</span>
                    </div>
                    <p style="color: #e22721; font-size: 14px; margin-bottom: 8px; font-weight: 600;">Scopri tutte le filiali →</p>
                    <p style="color: #e22721; font-size: 12px;">Firenze, Genova, Palermo e molte altre</p>
                </div>
            </div>

            <!-- Quick City Links -->
            <div class="cities-list">
                <a href="#" onclick="showCityPopup('Milano', 12); return false;">Milano (12)</a>
                <a href="#" onclick="showCityPopup('Roma', 8); return false;">Roma (8)</a>
                <a href="#" onclick="showCityPopup('Torino', 6); return false;">Torino (6)</a>
                <a href="#" onclick="showCityPopup('Bologna', 5); return false;">Bologna (5)</a>
                <a href="#" onclick="showCityPopup('Napoli', 4); return false;">Napoli (4)</a>
                <a href="#">Vedi tutte →</a>
            </div>
        </div>

        <!-- Popup Modal (hidden by default) -->
        <div id="cityPopup" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
            <div style="background: white; border-radius: 12px; padding: 30px; max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2 id="popupCityName" style="color: #e22721; font-size: 28px; margin: 0;"></h2>
                    <button onclick="closePopup()" style="background: none; border: none; font-size: 24px; cursor: pointer;">✕</button>
                </div>
                <div id="popupContent"></div>
                <button onclick="closePopup()" style="width: 100%; background: #e22721; color: white; padding: 12px; border: none; border-radius: 4px; font-size: 16px; font-weight: 600; cursor: pointer; margin-top: 20px;">
                    Chiudi
                </button>
            </div>
        </div>
    </section>

    <!-- CTA AZIENDE -->
    <section class="cta" id="aziende" style="background: linear-gradient(135deg, #e22721 0%, #c91f1a 100%); padding: 100px 0; position: relative; overflow: hidden;">
        <!-- Animated Background Pattern -->
        <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; opacity: 0.1;">
            <div style="position: absolute; width: 300px; height: 300px; border: 2px solid white; border-radius: 50%; top: -150px; right: -150px;"></div>
            <div style="position: absolute; width: 200px; height: 200px; border: 2px solid white; border-radius: 50%; bottom: -100px; left: -100px;"></div>
            <div style="position: absolute; width: 150px; height: 150px; border: 2px solid white; border-radius: 50%; top: 50%; left: 10%; transform: translateY(-50%);"></div>
        </div>

        <div class="container" style="position: relative; z-index: 2;">
            <!-- Main Content -->
            <div style="max-width: 800px; margin: 0 auto; text-align: center;">
                <h2 style="color: white; font-size: 42px; margin-bottom: 20px; font-weight: bold;">Sei un'azienda?</h2>
                <p style="color: rgba(255,255,255,0.95); font-size: 24px; margin-bottom: 50px; font-weight: 300;">
                    Ti troviamo il personale giusto in <span style="font-weight: bold; font-size: 28px;">5 giorni</span>
                    <span style="display: block; margin-top: 10px; font-size: 18px;">Garanzia soddisfatti o rimborsati</span>
                </p>

                <!-- Services Grid -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 30px; margin-bottom: 50px;">
                    <div style="background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); padding: 30px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.2); transition: all 0.3s ease;"
                         onmouseover="this.style.background='rgba(255,255,255,0.2)'; this.style.transform='translateY(-5px)'"
                         onmouseout="this.style.background='rgba(255,255,255,0.1)'; this.style.transform='translateY(0)'">
                        <div style="font-size: 36px; margin-bottom: 15px;"><i data-lucide="zap" style="width: 40px; height: 40px; stroke: white;"></i></div>
                        <h3 style="color: white; font-size: 18px; margin-bottom: 10px; font-weight: 600;">Somministrazione</h3>
                        <p style="color: rgba(255,255,255,0.8); font-size: 14px;">Personale flessibile per ogni esigenza</p>
                    </div>

                    <div style="background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); padding: 30px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.2); transition: all 0.3s ease;"
                         onmouseover="this.style.background='rgba(255,255,255,0.2)'; this.style.transform='translateY(-5px)'"
                         onmouseout="this.style.background='rgba(255,255,255,0.1)'; this.style.transform='translateY(0)'">
                        <div style="font-size: 36px; margin-bottom: 15px;"><i data-lucide="target" style="width: 40px; height: 40px; stroke: white;"></i></div>
                        <h3 style="color: white; font-size: 18px; margin-bottom: 10px; font-weight: 600;">Ricerca & Selezione</h3>
                        <p style="color: rgba(255,255,255,0.8); font-size: 14px;">I migliori talenti per la tua azienda</p>
                    </div>

                    <div style="background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); padding: 30px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.2); transition: all 0.3s ease;"
                         onmouseover="this.style.background='rgba(255,255,255,0.2)'; this.style.transform='translateY(-5px)'"
                         onmouseout="this.style.background='rgba(255,255,255,0.1)'; this.style.transform='translateY(0)'">
                        <div style="font-size: 36px; margin-bottom: 15px;"><i data-lucide="book-open" style="width: 40px; height: 40px; stroke: white;"></i></div>
                        <h3 style="color: white; font-size: 18px; margin-bottom: 10px; font-weight: 600;">Formazione</h3>
                        <p style="color: rgba(255,255,255,0.8); font-size: 14px;">Percorsi personalizzati di crescita</p>
                    </div>
                </div>

                <!-- Stats Row -->
                <div style="display: flex; justify-content: center; gap: 50px; margin-bottom: 40px; flex-wrap: wrap;">
                    <div style="text-align: center;">
                        <div style="color: white; font-size: 36px; font-weight: bold;">500+</div>
                        <div style="color: rgba(255,255,255,0.8); font-size: 14px;">Aziende partner</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="color: white; font-size: 36px; font-weight: bold;">24h</div>
                        <div style="color: rgba(255,255,255,0.8); font-size: 14px;">Prima proposta</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="color: white; font-size: 36px; font-weight: bold;">96%</div>
                        <div style="color: rgba(255,255,255,0.8); font-size: 14px;">Retention rate</div>
                    </div>
                </div>

                <!-- CTA Buttons -->
                <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
                    <a href="/cdn-cgi/l/email-protection#c3a2b9aaa6ada7a683a2b7b7a2afa4b1acb6b3edaab7" style="display: inline-block; background: white; color: #e22721; padding: 18px 50px; border-radius: 50px; text-decoration: none; font-size: 18px; font-weight: 600; transition: all 0.3s ease; transform: translateY(0); box-shadow: 0 10px 30px rgba(0,0,0,0.2);" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 15px 40px rgba(0,0,0,0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 10px 30px rgba(0,0,0,0.2)'">
                        RICHIEDI PERSONALE →
                    </a>
                    <a href="tel:02454320" style="display: inline-block; background: transparent; color: white; padding: 18px 40px; border: 2px solid white; border-radius: 50px; text-decoration: none; font-size: 18px; font-weight: 600; transition: all 0.3s ease;"
                       onmouseover="this.style.background='rgba(255,255,255,0.1)'; this.style.transform='translateY(-3px)'"
                       onmouseout="this.style.background='transparent'; this.style.transform='translateY(0)'">
                        <i data-lucide="phone" style="width: 14px; height: 14px; display: inline; vertical-align: middle;"></i> CHIAMACI ORA
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer incluso dinamicamente -->
    <div id="footer-placeholder"></div>

    <!-- Componenti Header e Footer -->
    <script src="../assets/js/attal-components.js"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        });
    </script>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- Page Scripts -->
    <script>
        // Animated Counter
        function animateCounter() {
            const counter = document.getElementById('counter');
            const target = 1331;
            const duration = 2000; // 2 seconds
            const increment = target / (duration / 10);
            let current = 0;

            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    current = target;
                    clearInterval(timer);
                }
                counter.textContent = Math.floor(current).toLocaleString('it-IT');
            }, 10);
        }

        // Timeline Animation
        function animateTimeline() {
            // Animate steps sequentially
            setTimeout(() => {
                const step1 = document.getElementById('step1');
                step1.style.opacity = '1';
                step1.style.transform = 'translateY(0)';
            }, 300);

            setTimeout(() => {
                const step2 = document.getElementById('step2');
                step2.style.opacity = '1';
                step2.style.transform = 'translateY(0)';
            }, 600);

            setTimeout(() => {
                const step3 = document.getElementById('step3');
                step3.style.opacity = '1';
                step3.style.transform = 'translateY(0)';
            }, 900);
        }

        // Check if element is in viewport
        function isInViewport(element) {
            const rect = element.getBoundingClientRect();
            // Attiva quando l'elemento entra nella viewport (anche parzialmente)
            return rect.top < (window.innerHeight || document.documentElement.clientHeight) && rect.bottom > 0;
        }

        // Trigger timeline animation when section starts entering view
        let timelineAnimated = false;
        window.addEventListener('scroll', () => {
            const howItWorks = document.querySelector('.how-it-works');
            if (howItWorks && !timelineAnimated) {
                const rect = howItWorks.getBoundingClientRect();
                // Attiva quando la sezione è a 200px dal fondo dello schermo
                if (rect.top < window.innerHeight - 100) {
                    timelineAnimated = true;
                    animateTimeline();
                }
            }
        });

        // Animate Stars for Google Review
        function animateStars() {
            const container = document.getElementById('stars-container');
            const stars = ['★', '★', '★', '★', '☆'];

            stars.forEach((star, index) => {
                setTimeout(() => {
                    const span = document.createElement('span');
                    span.textContent = star;
                    span.className = 'star';
                    span.style.animationDelay = `${index * 0.1}s`;
                    container.appendChild(span);
                }, index * 100);
            });
        }

        // Check if stats section is in viewport
        let statsAnimated = false;
        function checkStatsInView() {
            const statsSection = document.querySelector('.stats');
            if (statsSection && isInViewport(statsSection) && !statsAnimated) {
                statsAnimated = true;
                animateStars();
            }
        }

        // Add to scroll listener
        window.addEventListener('scroll', () => {
            checkStatsInView();

            const howItWorks = document.querySelector('.how-it-works');
            if (howItWorks && isInViewport(howItWorks) && !timelineAnimated) {
                timelineAnimated = true;
                animateTimeline();
            }
        });

        // Start counter animation when page loads
        window.addEventListener('load', () => {
            setTimeout(animateCounter, 500); // Small delay for effect

            // Check if sections are already visible on load
            checkStatsInView();

            const howItWorks = document.querySelector('.how-it-works');
            if (howItWorks && isInViewport(howItWorks)) {
                timelineAnimated = true;
                animateTimeline();
            }
        });

        function handleSearch(event) {
            event.preventDefault();
            const query = document.getElementById('jobQuery').value;
            const city = document.getElementById('citySelect').value;

            // Redirect alla pagina offerte locale
            window.location.href = 'careers.html';
        }

        // City Data for Popup
        const cityData = {
            'Milano': {
                count: 12,
                branches: [
                    { name: 'Sede Centrale', address: 'Via Pergolesi 8', phone: '02/454320' },
                    { name: 'Milano Centro', address: 'Via Roma 15', phone: '02/123456' },
                    { name: 'Milano Nord', address: 'Viale Monza 100', phone: '02/789012' },
                    { name: 'Milano Sud', address: 'Via Ripamonti 50', phone: '02/345678' }
                ]
            },
            'Roma': {
                count: 8,
                branches: [
                    { name: 'Roma Centro', address: 'Via Nazionale 20', phone: '06/123456' },
                    { name: 'Roma EUR', address: 'Viale Europa 100', phone: '06/789012' },
                    { name: 'Roma Tiburtina', address: 'Via Tiburtina 500', phone: '06/345678' }
                ]
            },
            'Torino': {
                count: 6,
                branches: [
                    { name: 'Torino Centro', address: 'Corso Francia 10', phone: '011/123456' },
                    { name: 'Torino Sud', address: 'Via Po 25', phone: '011/789012' }
                ]
            },
            'Bologna': {
                count: 5,
                branches: [
                    { name: 'Bologna Centro', address: 'Via Indipendenza 30', phone: '051/123456' },
                    { name: 'Bologna Fiera', address: 'Via Stalingrado 45', phone: '051/789012' }
                ]
            },
            'Napoli': {
                count: 4,
                branches: [
                    { name: 'Napoli Centro', address: 'Via Toledo 100', phone: '081/123456' },
                    { name: 'Napoli Vomero', address: 'Via Scarlatti 50', phone: '081/789012' }
                ]
            }
        };

        function showCityPopup(cityName, count) {
            const popup = document.getElementById('cityPopup');
            const popupCityName = document.getElementById('popupCityName');
            const popupContent = document.getElementById('popupContent');

            popupCityName.textContent = cityName;

            let content = `<p style="color: #6b7280; margin-bottom: 20px;">${count} filiali attive</p>`;

            if (cityData[cityName]) {
                content += '<div style="display: flex; flex-direction: column; gap: 15px;">';
                cityData[cityName].branches.forEach(branch => {
                    content += `
                        <div style="background: #f9fafb; padding: 15px; border-radius: 8px;">
                            <h4 style="color: #1f2937; margin-bottom: 8px;">${branch.name}</h4>
                            <p style="color: #6b7280; font-size: 14px; margin-bottom: 4px;"><i data-lucide="map-pin" style="width: 14px; height: 14px; display: inline; vertical-align: middle; stroke: #e22721;"></i> ${branch.address}</p>
                            <p style="color: #6b7280; font-size: 14px;"><i data-lucide="phone" style="width: 14px; height: 14px; display: inline; vertical-align: middle;"></i> ${branch.phone}</p>
                        </div>
                    `;
                });
                content += '</div>';

                if (count > cityData[cityName].branches.length) {
                    content += `<p style="color: #9ca3af; font-size: 14px; margin-top: 15px; text-align: center;">
                        + altre ${count - cityData[cityName].branches.length} filiali disponibili
                    </p>`;
                }
            } else {
                content += '<p style="color: #6b7280;">Informazioni dettagliate disponibili a breve.</p>';
            }

            popupContent.innerHTML = content;
            popup.style.display = 'flex';

            // Prevent body scroll when popup is open
            document.body.style.overflow = 'hidden';
        }

        function closePopup() {
            document.getElementById('cityPopup').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Close popup when clicking outside
        document.addEventListener('DOMContentLoaded', function() {
            const popup = document.getElementById('cityPopup');
            popup.addEventListener('click', function(e) {
                if (e.target === popup) {
                    closePopup();
                }
            });
        });
    </script>

    <!-- Leaflet Map Initialization -->
    <script>
        // Inizializza la mappa Leaflet
        document.addEventListener('DOMContentLoaded', function() {
            // Crea la mappa centrata sull'Italia
            const map = L.map('italy-map', {
                zoomControl: true,
                scrollWheelZoom: false
            }).setView([42.5, 12.5], 6);

            // Aggiungi tile layer (CartoDB Positron - minimale ed elegante)
            L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
                attribution: '© OpenStreetMap © CartoDB'
            }).addTo(map);

            // Icona personalizzata rossa per sedi principali
            const mainIcon = L.divIcon({
                className: 'custom-marker',
                html: '<div style="background: #e22721; width: 24px; height: 24px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.3);"></div>',
                iconSize: [24, 24],
                iconAnchor: [12, 12]
            });

            // Icona per filiali multiple
            const multiIcon = L.divIcon({
                className: 'custom-marker',
                html: '<div style="background: #e22721; width: 18px; height: 18px; border-radius: 50%; border: 2px solid white; box-shadow: 0 2px 6px rgba(0,0,0,0.25);"></div>',
                iconSize: [18, 18],
                iconAnchor: [9, 9]
            });

            // Icona per presenza locale
            const localIcon = L.divIcon({
                className: 'custom-marker',
                html: '<div style="background: #e22721; width: 12px; height: 12px; border-radius: 50%; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.2); opacity: 0.8;"></div>',
                iconSize: [12, 12],
                iconAnchor: [6, 6]
            });

            // Sedi principali
            const mainCities = [
                { name: 'Milano', lat: 45.4642, lng: 9.1900, filiali: 12, address: 'Via Pergolesi 8' },
                { name: 'Roma', lat: 41.9028, lng: 12.4964, filiali: 8, address: 'Via Nazionale 20' }
            ];

            // Filiali multiple
            const multiCities = [
                { name: 'Torino', lat: 45.0703, lng: 7.6869, filiali: 5, address: 'Corso Francia 10' },
                { name: 'Bologna', lat: 44.4949, lng: 11.3426, filiali: 4, address: 'Via Indipendenza 30' },
                { name: 'Napoli', lat: 40.8518, lng: 14.2681, filiali: 6, address: 'Via Toledo 100' },
                { name: 'Palermo', lat: 38.1157, lng: 13.3615, filiali: 3, address: 'Via Libertà 50' }
            ];

            // Presenze locali
            const localCities = [
                { name: 'Genova', lat: 44.4056, lng: 8.9463, filiali: 2 },
                { name: 'Venezia', lat: 45.4408, lng: 12.3155, filiali: 2 },
                { name: 'Firenze', lat: 43.7696, lng: 11.2558, filiali: 2 },
                { name: 'Bari', lat: 41.1171, lng: 16.8719, filiali: 2 },
                { name: 'Cagliari', lat: 39.2238, lng: 9.1217, filiali: 1 },
                { name: 'Verona', lat: 45.4384, lng: 10.9916, filiali: 2 },
                { name: 'Padova', lat: 45.4064, lng: 11.8768, filiali: 1 },
                { name: 'Catania', lat: 37.5079, lng: 15.0830, filiali: 2 },
                { name: 'Brescia', lat: 45.5416, lng: 10.2118, filiali: 1 },
                { name: 'Bergamo', lat: 45.6983, lng: 9.6773, filiali: 1 },
                { name: 'Modena', lat: 44.6471, lng: 10.9252, filiali: 1 },
                { name: 'Parma', lat: 44.8015, lng: 10.3279, filiali: 1 },
                { name: 'Reggio Emilia', lat: 44.6989, lng: 10.6297, filiali: 1 },
                { name: 'Perugia', lat: 43.1107, lng: 12.3908, filiali: 1 },
                { name: 'Ancona', lat: 43.6158, lng: 13.5189, filiali: 1 },
                { name: 'Pescara', lat: 42.4618, lng: 14.2161, filiali: 1 },
                { name: 'Taranto', lat: 40.4644, lng: 17.2470, filiali: 1 },
                { name: 'Lecce', lat: 40.3516, lng: 18.1750, filiali: 1 },
                { name: 'Messina', lat: 38.1938, lng: 15.5540, filiali: 1 },
                { name: 'Salerno', lat: 40.6824, lng: 14.7681, filiali: 1 }
            ];

            // Aggiungi markers sedi principali
            mainCities.forEach(city => {
                L.marker([city.lat, city.lng], { icon: mainIcon })
                    .addTo(map)
                    .bindPopup(`
                        <div style="text-align: center; min-width: 150px;">
                            <h3 style="color: #e22721; margin: 0 0 8px 0; font-size: 16px;">${city.name}</h3>
                            <p style="margin: 0 0 4px 0; font-weight: bold;">${city.filiali} filiali</p>
                            <p style="margin: 0; color: #6b7280; font-size: 12px;">${city.address}</p>
                        </div>
                    `);
            });

            // Aggiungi markers filiali multiple
            multiCities.forEach(city => {
                L.marker([city.lat, city.lng], { icon: multiIcon })
                    .addTo(map)
                    .bindPopup(`
                        <div style="text-align: center; min-width: 120px;">
                            <h3 style="color: #e22721; margin: 0 0 8px 0; font-size: 14px;">${city.name}</h3>
                            <p style="margin: 0; font-weight: bold;">${city.filiali} filiali</p>
                        </div>
                    `);
            });

            // Aggiungi markers presenze locali
            localCities.forEach(city => {
                L.marker([city.lat, city.lng], { icon: localIcon })
                    .addTo(map)
                    .bindPopup(`
                        <div style="text-align: center;">
                            <h3 style="color: #e22721; margin: 0 0 4px 0; font-size: 13px;">${city.name}</h3>
                            <p style="margin: 0; font-size: 12px;">${city.filiali} ${city.filiali === 1 ? 'filiale' : 'filiali'}</p>
                        </div>
                    `);
            });
        });
    </script>
</body>
</html>
